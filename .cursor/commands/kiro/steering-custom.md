<meta>
description: 特化したプロジェクトコンテキスト用のカスタムステアリングドキュメントを作成
</meta>

# Kiro カスタムステアリング作成

<background_information>
**役割**: コアファイル（product、tech、structure）以外の専門的なステアリングドキュメントを作成。

**ミッション**: 特化した領域のためのドメイン固有プロジェクトメモリの作成を支援。

**成功基準**:
- カスタムステアリングが専門的なパターンをキャプチャ
- コアステアリングと同じ粒度原則に従う
- 特定のドメインに明確な価値を提供
</background_information>

<instructions>
## ワークフロー

1. **ユーザーに確認** カスタムステアリングのニーズ:
   - ドメイン/トピック（例: "API標準"、"テストアプローチ"）
   - 文書化する具体的な要件やパターン

2. **テンプレートの存在確認**:
   - 利用可能な場合 `.kiro/settings/templates/steering-custom/{name}.md` から読み込み
   - 出発点として使用し、プロジェクトに基づいてカスタマイズ

3. **コードベースを分析**（JIT）して関連パターンを抽出:
   - **Glob** で関連ファイルを検索
   - **Read** で既存実装を確認
   - **Grep** で特定パターンを検索

4. **カスタムステアリングを生成**:
   - 利用可能な場合はテンプレート構造に従う
   - `.kiro/settings/rules/steering-principles.md` の原則を適用
   - 網羅的リストではなくパターンにフォーカス
   - 100-200行に収める（2-3分で読める量）

5. **ファイルを作成** `.kiro/steering/{name}.md` に

## 利用可能なテンプレート

`.kiro/settings/templates/steering-custom/` で利用可能なテンプレート:

1. **api-standards.md** - REST/GraphQL規約、エラーハンドリング
2. **testing.md** - テスト構成、モック、カバレッジ
3. **security.md** - 認証パターン、入力検証、シークレット
4. **database.md** - スキーマ設計、マイグレーション、クエリパターン
5. **error-handling.md** - エラータイプ、ロギング、リトライ戦略
6. **authentication.md** - 認証フロー、権限、セッション管理
7. **deployment.md** - CI/CD、環境、ロールバック手順

必要時にテンプレートを読み込み、プロジェクト用にカスタマイズ。

## ステアリング原則

`.kiro/settings/rules/steering-principles.md` より:

- **リストよりパターン**: すべてのファイル/コンポーネントではなくパターンを文書化
- **単一ドメイン**: ファイルごとに1トピック
- **具体例**: コードでパターンを示す
- **維持可能なサイズ**: 通常100-200行
- **セキュリティファースト**: シークレットや機密データを含めない

</instructions>

## ツールガイダンス

- **Read**: テンプレートを読み込み、既存コードを分析
- **Glob**: パターン分析用に関連ファイルを検索
- **Grep**: 特定パターンを検索
- **LS**: 関連構造を理解

**JIT戦略**: そのタイプのステアリング作成時にのみテンプレートを読み込み。

## 出力説明

チャットサマリーとファイル位置（ファイルは直接作成）。

```
✅ カスタムステアリング作成完了

## 作成:
- .kiro/steering/api-standards.md

## 基づいた情報:
- テンプレート: api-standards.md
- 分析: src/api/ ディレクトリのパターン
- 抽出: REST規約、エラーフォーマット

## 内容:
- エンドポイント命名パターン
- リクエスト/レスポンスフォーマット
- エラーハンドリング規約
- 認証アプローチ

必要に応じてレビューとカスタマイズを。
```

## 例

### 成功: API標準
**入力**: "API標準ステアリングを作成"  
**アクション**: テンプレート読み込み、src/api/ を分析、パターン抽出  
**出力**: プロジェクト固有のREST規約を含む api-standards.md

### 成功: テスト戦略
**入力**: "テストアプローチを文書化"  
**アクション**: テンプレート読み込み、テストファイルを分析、パターン抽出  
**出力**: テスト構成とモック戦略を含む testing.md

## 安全性とフォールバック

- **テンプレートなし**: ドメイン知識に基づいてゼロから生成
- **セキュリティ**: シークレットを含めない（原則を読み込み）
- **検証**: コアステアリングのコンテンツと重複しないことを確認

## 注記

- テンプレートは出発点、プロジェクト用にカスタマイズ
- コアステアリングと同じ粒度原則に従う
- すべてのステアリングファイルはプロジェクトメモリとして読み込まれる
- カスタムファイルはコアファイルと同等に重要
- エージェント固有のツールディレクトリ（`.cursor/`、`.gemini/`、`.claude/` など）の文書化を避ける
- `.kiro/specs/` と `.kiro/steering/` への軽い参照は許容、他の `.kiro/` ディレクトリは避ける

</output>
